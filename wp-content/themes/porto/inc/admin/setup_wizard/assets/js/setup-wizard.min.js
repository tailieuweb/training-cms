var PortoWizard=function(t){function e(){if(t(".button-next").on("click",function(e){return!!function(t){function e(){if(!r){for(var t="",n=0;n<l.length;n++)l[n]=l[n]+1,l[n]>=a.length&&(l[n]=0),t+=a.charAt(l[n]);i[s](t),setTimeout(function(){e()},60)}}var i=jQuery(t);if("yes"==i.data("done-loading"))return!1;var n=i.text(),o=i.outerWidth(),a="⡀⡀⡀⡀⡀⡀⡀⡀⡀⡀⠄⠂⠁⠁⠂⠄",r=!1;i.css("width",o),i.addClass("wizard_step_loading_button_current");var s=i.is("input")?"val":"text";i[s](a),i.data("done-loading","yes");var l=[0,1,2];return e(),{done:function(){r=!0,i[s](n),i.removeClass("wizard_step_loading_button_current"),i.attr("disabled",!1)}}}(this)&&(!t(this).data("callback")||void 0===i[t(this).data("callback")]||(i[t(this).data("callback")](this),!1))}),t(".shortcode_list").length)return i.load_unused_shortcodes(),!1;t(".button-upload").on("click",function(t){t.preventDefault(),function(){"use strict";var t,e;if(void 0!==t)return void t.open();(t=wp.media.frames.file_frame=wp.media({title:"Upload Logo",button:{text:"Select Logo"},multiple:!1})).on("select",function(){e=t.state().get("selection").first().toJSON(),jQuery(".site-logo").attr("src",e.url),jQuery("#new_logo_id").val(e.id)}),t.open()}()}),t(".theme-presets a").on("click",function(e){e.preventDefault();t(this).parents("ul").first().find(".current").removeClass("current");t(this).parents("li").first().addClass("current");var i=t(this).data("style");return t("#new_style").val(i),!1}),t('.porto-setup-wizard-plugins input[type="checkbox"]').on("change",function(){var e=t(this).closest("li").data("slug");if("js_composer"==e||"elementor"==e||"visualcomposer"==e){var i=t(this).closest(".porto-setup-wizard-plugins"),n=t(this).closest("form").find(".porto-notice"),o=0,a=["js_composer","elementor","visualcomposer"];for(var r in a){var s=a[r];i.find('li[data-slug="'+s+'"]').length&&!i.find('li[data-slug="'+s+'"] input[type="checkbox"]').is(":checked")||o++}o>1?n.removeClass("d-none"):n.addClass("d-none")}})}var i={install_plugins:function(e){(new function(){function e(t){"object"==typeof t&&void 0!==t.message?(a.find("span").text(t.message),void 0!==t.url?t.hash==l?(a.find("span").text("failed"),n()):(t.plugin&&-1!==t.plugin.indexOf("visualcomposer")?t["activate-multi"]=1:!t.plugin||-1===t.plugin.indexOf("woocommerce")&&-1===t.plugin.indexOf("elementor")||(t.url=t.url+"&activate-multi=1"),l=t.hash,jQuery.post(t.url,t,function(e){i(),a.find("span").text(t.message)}).fail(e)):(t.done,n())):(a.find("span").text("ajax error"),n())}function i(){s&&jQuery.post(ajaxurl+"?activate-multi=1",{action:"undefined"==typeof porto_setup_wizard_params?"porto_speed_optimize_wizard_plugins":"porto_setup_wizard_plugins",wpnonce:"undefined"==typeof porto_setup_wizard_params?porto_speed_optimize_wizard_params.wpnonce:porto_setup_wizard_params.wpnonce,slug:s},e).fail(e)}function n(){var e=!1;a&&(a.data("done_item")||(r++,a.data("done_item",1)),a.find(".spinner").css("visibility","hidden")),t(".porto-setup-wizard-plugins li").each(function(){t(this).hasClass("installing")&&(""==s||e?(s=t(this).data("slug"),a=t(this),i(),e=!1):t(this).data("slug")==s&&(e=!0))}),r>=t(".porto-setup-wizard-plugins li.installing").length&&o()}var o,a,r=0,s="",l="";return{init:function(e){t(".porto-setup-wizard-plugins > li").each(function(){t(this).find('input[type="checkbox"]').is(":checked")&&t(this).addClass("installing")}),o=function(){t(e).attr("href")&&"#"!=t(e).attr("href")?window.location.href=e.href+"&activate-multi=1":window.location.reload()},n()}}}).init(e)},load_unused_shortcodes:function(){(new function(){function t(t,e){if(void 0!=typeof e)for(var i=0;i<e.length;i++)if(t==e[i])return!0;return!1}function e(e){if(e){var i="";for(var n in e){var o=e[n];i+="<li>",i+='<label class="checkbox checkbox-inline">',i+='<input type="checkbox" name="shortcodes[]" value="'+o+'"'+(t(o,porto_speed_optimize_wizard_params.shortcodes_to_remove)?' checked="checked"':"")+">",i+=o,i+="</label>",i+="</li>"}jQuery(".shortcode_list").html(i),jQuery(".porto-setup-actions .btn:disabled").removeAttr("disabled")}}return{init:function(){jQuery(".shortcode_list").block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.6}}),jQuery.ajax({type:"post",url:ajaxurl,data:{action:"porto_speed_optimize_wizard_shortcodes",wpnonce:porto_speed_optimize_wizard_params.wpnonce},dataType:"json",success:e})}}}).init()}};return{init:function(){t(e)}}}(jQuery);PortoWizard.init();