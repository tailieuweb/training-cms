!function(e){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.custom_fonts=redux.field_objects.custom_fonts||{},redux.field_objects.custom_fonts.init=function(t){t||(t=e(document).find(".redux-group-tab:visible").find(".redux-container-custom_fonts:visible")),e(t).each(function(){e(this).find(".media_add_font").unbind().on("click",function(t){return t.preventDefault(),redux.field_objects.custom_fonts.addFont(e(this).parents("fieldset.redux-field:first")),!1}),e(this).find(".fontDelete").on("click",function(t){return t.preventDefault(),redux.field_objects.custom_fonts.removeFont(e(this)),!1})})},redux.field_objects.custom_fonts.addFont=function(t){t.parents("td:first"),t.parents("tr:first");var r,n=jQuery(this);r?r.open():((r=wp.media({multiple:!0,library:{type:["application","font"]},title:n.data("choose"),button:{text:n.data("update")}})).on("click",function(){}),r.on("select",function(){var n=r.state().get("selection").first();if(r.close(),"application"===n.attributes.type||"font"===n.attributes.type){var o={action:"redux_custom_fonts",nonce:jQuery(t).find(".media_add_font").attr("data-nonce"),attachment_id:n.id,title:n.attributes.title,mime:n.attributes.mime};if("application/zip "==o.mime);else;var i=e(document.getElementById("redux_ajax_overlay"));i.fadeIn();jQuery(document.getElementById("redux_notification_bar")).slideUp(),jQuery(".redux-save-warn").slideUp(),jQuery(".redux_ajax_save_error").slideUp("medium",function(){jQuery(this).remove()}),jQuery.ajax({type:"post",dataType:"json",url:ajaxurl,data:o,error:function(e){i.fadeOut("fast"),jQuery(".wrap h2:first").parent().append('<div class="error redux_ajax_save_error" style="display:none;"><p>There was an error processing your fonts. Please try again.</p></div>'),jQuery(".redux_ajax_save_error").slideDown(),jQuery("html, body").animate({scrollTop:0},"slow")},success:function(e){e.type&&"success"==e.type?window.location.reload():alert("There was an error deleting your font: "+e.msg),i.fadeOut("fast")}})}}),r.open())},redux.field_objects.custom_fonts.removeFont=function(e){var t=e.parents("td:first"),r=e.parents("tr:first"),n=e.data();n.action="redux_custom_fonts",n.nonce=e.parents(".redux-container-custom_fonts:first").find(".media_add_font").attr("data-nonce"),jQuery.post(ajaxurl,n,function(e){if((e=JSON.parse(e)).type&&"success"==e.type){1==t.parents("tbody:first").find("tr").length?t.parents("table:first").slideUp().remove():(r.wrap("<div></div>"),r.parent().slideUp().remove())}else alert("There was an error deleting your font: "+e.msg)})}}(jQuery);