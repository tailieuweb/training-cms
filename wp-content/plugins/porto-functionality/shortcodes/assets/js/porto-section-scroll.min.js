(function(e,t){"use strict";e=e||{};var o=function(e,t){return this.initialize(e,t)};o.defaults={targetClass:".section-scroll",dotsNav:!0},o.prototype={initialize:function(e,t){return e.data("__sectionScroll")?this:(this.$el=e,this.setData().setOptions(t).build().events(),this)},setData:function(){return this.$el.data("__sectionScroll",this),this},setOptions:function(e){return this.options=t.extend(!0,{},o.defaults,e,{wrapper:this.$el}),this},getEventsPage:function(e){var t=[];return t.y=void 0!==e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,t.x=void 0!==e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,!("ontouchstart"in window||navigator.msMaxTouchPoints)||void 0!==e.pointerType&&"mouse"==e.pointerType||void 0===e.touches||(t.y=e.touches[0].pageY,t.x=e.touches[0].pageX),t},build:function(){if(this.options.wrapper.length){var e=this,o=this.options.wrapper.get(0);e.$header=t("#header"),t("html").addClass("overflow-hidden"),e.updateSectionsHeight(),t(this.options.targetClass).wrap('<div class="section-wrapper"></div>'),t(".section-wrapper").each(function(){t(this).height(t(this).find(".section-scroll").outerHeight())}),t(".section-wrapper").first().addClass("active");var i,n,s=!1,a=!1,r="",c=0,l=0;"ontouchstart"in window||navigator.msMaxTouchPoints?(o.addEventListener("touchstart",function(t){c=e.getEventsPage(t).y}),n="onwheel"in document?"wheel touchmove":void 0!==document.onmousewheel?"mousewheel touchmove":"DOMMouseScroll touchmove"):(n="onwheel"in document?"wheel pointermove":void 0!==document.onmousewheel?"mousewheel pointermove":"DOMMouseScroll pointermove",o.addEventListener("pointerdown",function(t){void 0!==t.pointerType&&"mouse"==t.pointerType||(c=e.getEventsPage(t).y)}));var p=function(o){if(!t(".porto-popup-menu.opened").length&&"mouse"!=o.pointerType){var n=null;if(r="",o.type&&("touchmove"==o.type||o.pointerType&&"mouse"!=o.pointerType)){if(l=e.getEventsPage(o).y,c==l)return;c>l?r="up":l>c&&(r="down")}else n=void 0==o.wheelDelta?o.deltaY>0:o.wheelDelta<0;var p,d=t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll"),h=e.getNextSection(n,r);if(p=e.getCurrentIndex()==t(".section-wrapper").length-1?t(document).height():h.offset().top,r&&(i&&clearTimeout(i),i=setTimeout(function(){t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll").hasClass("section-scroll-scrollable")?t("html").removeClass("overflow-hidden"):t("html").addClass("overflow-hidden")},1200)),!d.hasClass("section-scroll-scrollable")||s||a){if(!(r&&Math.abs(c-l)<=window.innerHeight/100*2||s||a)){if(n||"up"==r){if(e.getCurrentIndex()==t(".section-wrapper").length-1)return;e.changeSectionActiveState(h),setTimeout(function(){e.moveTo(h.offset().top)},150)}else{if(0==e.getCurrentIndex())return;e.changeSectionActiveState(h),h.height()>window.innerHeight?e.moveTo(d.offset().top-window.innerHeight):setTimeout(function(){e.moveTo(h.offset().top)},150)}e.changeDotsActiveState(),e.$header.css({opacity:0,transition:"ease opacity 500ms"}),h.css({position:"relative",opacity:1,"z-index":1,transform:"translate3d(0,0,0) scale(1)"}),d.css({position:"fixed",width:"100%",top:0,left:0,opacity:0,"z-index":0,transform:"translate3d(0,0,-10px) scale(0.7)",transition:"ease transform 600ms, ease opacity 600ms"});var u=parseInt(d.css("marginLeft"),10)+parseInt(d.css("marginRight"),10);u<0&&d.css("width","calc(100% + "+-1*u+"px)"),setTimeout(function(){d.css({position:"relative",opacity:1,transform:"translate3d(0,0,-10px) scale(1)"}),e.$header.css({opacity:1}),e.$header.trigger("porto_section_scroll_scrolled",[e.getCurrentIndex()]),setTimeout(function(){s=!1},500)},1e3),s=!0}}else{if(n||"up"==r){if(h.length&&t(window).scrollTop()+window.innerHeight>=p){if(s=!0,setTimeout(function(){setTimeout(function(){s=!1},500)},1e3),e.getCurrentIndex()==t(".section-wrapper").length-1)return!1;e.moveTo(d.offset().top+d.outerHeight()),e.changeSectionActiveState(h),e.$header.css({opacity:0,transition:"ease opacity 500ms"})}if(!r)for(f=1;f<100;f++)if(t("body, html").scrollTop(t(window).scrollTop()+1),t(window).scrollTop()+window.innerHeight>=p){a=!0,setTimeout(function(){a=!1},500);break}}else{if(t(window).scrollTop()<=d.offset().top){if(s=!0,setTimeout(function(){setTimeout(function(){s=!1},500)},1e3),0==e.getCurrentIndex())return!1;e.moveTo(d.offset().top-window.innerHeight),e.changeSectionActiveState(h),e.$header.css({opacity:0,transition:"ease opacity 500ms"})}if(!r)for(var f=1;f<100;f++)if(t("body, html").scrollTop(t(window).scrollTop()-1),t(window).scrollTop()<=d.offset().top){a=!0,setTimeout(function(){a=!1},500);break}}e.changeDotsActiveState()}}};return n.split(" ").forEach(function(e){o.addEventListener(e,p)}),this.options.dotsNav&&e.dotsNavigation(),setTimeout(function(){if(t(window.location.hash).get(0))e.moveTo(t(window.location.hash).parent().offset().top),e.changeSectionActiveState(t(window.location.hash)),e.changeDotsActiveState(),e.updateHash(!0);else{var o=window.location.hash,i=o.replace("#","");o||(i=1),e.moveTo(t(".section-wrapper").eq(i-1).offset().top),e.changeSectionActiveState(t(".section-wrapper").eq(i-1).find(".section-scroll")),e.changeDotsActiveState(),e.updateHash(!0)}t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll").hasClass("section-scroll-scrollable")&&t("html").removeClass("overflow-hidden"),t(window).trigger("section.scroll.ready"),e.$header.trigger("porto_section_scroll_scrolled",[e.getCurrentIndex()])},500),this}},updateSectionsHeight:function(){return t(".section-scroll").each(function(){t(this).outerHeight()<window.innerHeight+3?t(this).css({height:"100vh"}):t(this).addClass("section-scroll-scrollable")}),t(".section-wrapper").each(function(){t(this).height(t(this).find(".section-scroll").outerHeight())}),this},updateHash:function(e){if(window.location.hash){if(!e){var t=this.getCurrentIndex()+1;window.location.hash=t}}else window.location.hash=1;return this},getCurrentIndex:function(){var e=0;return t(".section-wrapper").each(function(o){if(t(this).hasClass("active"))return e=o}),e},moveTo:function(e,o){var i=this;return t("body, html").animate({scrollTop:e},1e3,"easeOutQuint"),setTimeout(function(){i.updateHash()},500),this},getNextSection:function(e,o){return e||"up"==o?t(".section-wrapper").eq(this.getCurrentIndex()+1).children().eq(0):t(".section-wrapper").eq(this.getCurrentIndex()-1).children().eq(0)},changeSectionActiveState:function(e){return t(".section-wrapper").removeClass("active"),e.parent().addClass("active"),this},changeDotsActiveState:function(){return t(".section-scroll-dots-navigation > ul > li").removeClass("active"),t(".section-scroll-dots-navigation > ul > li").eq(this.getCurrentIndex()).addClass("active"),this},dotsNavigation:function(){var e=this,o=t('<div class="section-scroll-dots-navigation"><ul class="list list-unstyled"></ul></div>'),i=e.getCurrentIndex();e.options.dotsClass&&o.addClass(e.options.dotsClass);for(var n=0;n<t(".section-scroll").length;n++){var s=t(".section-wrapper").eq(n).find(".section-scroll").data("section-scroll-title");o.find("> ul").append("<li"+(i==n?' class="active"':"")+'><a href="#'+n+'" data-nav-id="'+n+'"><span>'+s+"</span></a></li>")}return t(".page-wrapper").append(o),o.find("a[data-nav-id]").on("click touchstart",function(o){o.preventDefault();var i=t(this);t(".section-scroll").css({opacity:0,transition:"ease opacity 300ms"}),e.$header.css({opacity:0,transition:"ease opacity 500ms"}),setTimeout(function(){e.moveTo(t(".section-wrapper").eq(i.data("nav-id")).offset().top),t(".section-wrapper").removeClass("active"),t(".section-wrapper").eq(i.data("nav-id")).addClass("active"),t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll").css({opacity:1}),setTimeout(function(){t(".section-scroll").css({opacity:1}),e.$header.css({opacity:1}),e.$header.trigger("porto_section_scroll_scrolled",[e.getCurrentIndex()])},500),e.changeDotsActiveState()},500)}),this},events:function(){var e=this;return t(window).on("section.scroll.ready",function(){t(window).scrollTop(0)}),t(document).ready(function(){t(window).smartresize(function(){e.updateSectionsHeight()})}),this}},t.extend(e,{PluginSectionScroll:o}),t.fn.themePluginSectionScroll=function(e){return this.map(function(){var i=t(this);return i.data("__sectionScroll")?i.data("__sectionScroll"):new o(i,e)})}}).apply(this,[window.theme,jQuery]);