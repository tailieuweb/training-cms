(window.vcvWebpackJsonp4x=window.vcvWebpackJsonp4x||[]).push([[0],{"./imageMasonryGallery/index.js":function(e,a,n){"use strict";n.r(a);var t=n("./node_modules/vc-cake/index.js"),l=n.n(t),s=n("./node_modules/@babel/runtime/helpers/extends/index.js"),i=n.n(s),o=n("./node_modules/@babel/runtime/helpers/classCallCheck/index.js"),r=n.n(o),c=n("./node_modules/@babel/runtime/helpers/createClass/index.js"),m=n.n(c),p=n("./node_modules/@babel/runtime/helpers/assertThisInitialized/index.js"),u=n.n(p),g=n("./node_modules/@babel/runtime/helpers/inherits/index.js"),d=n.n(g),y=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn/index.js"),h=n.n(y),v=n("./node_modules/@babel/runtime/helpers/getPrototypeOf/index.js"),b=n.n(v),f=n("./node_modules/@babel/runtime/helpers/defineProperty/index.js"),x=n.n(f),w=n("./node_modules/react/index.js"),k=n.n(w);function G(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=b()(e);if(a){var l=b()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return h()(this,n)}}var I=function(e){d()(n,e);var a=G(n);function n(e){var t;return r()(this,n),t=a.call(this,e),x()(u()(t),"currentImg",0),x()(u()(t),"loadingIndex",0),x()(u()(t),"data",[]),t.loadImage=t.loadImage.bind(u()(t)),t}return m()(n,[{key:"componentDidMount",value:function(){this.prepareImages(this.props.atts)}},{key:"componentDidUpdate",value:function(){l.a.env("iframe")&&l.a.env("iframe").vcv.trigger("ready")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.currentImg=0,this.data=[],this.loadingIndex++,this.prepareImages(e.atts,!0)}},{key:"prepareImages",value:function(e){for(var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.image,t=this.getImageUrl(n),l=e.columns<=0?1:e.columns,s=[],i=0;i<l;i++)s.push(0),this.data.push([]);if(a){s=[];for(var o=0;o<l;o++)s.push(0)}this.loadImage(t,s)}},{key:"loadImage",value:function(e,a){if(e.length){var n=new window.Image;n.loadingIndex=this.loadingIndex,n.onload=this.imgLoadHandler.bind(this,e,a,n),n.src=e[this.currentImg]}else this.setState({columnData:this.data})}},{key:"imgLoadHandler",value:function(e,a,n){if(n.loadingIndex===this.loadingIndex){var t=this.getImageHeight(n.width,n.height),l=this.getSmallestFromArray(a);a[l]+=t,this.data[l].push(this.props.atts.image[this.currentImg]),this.currentImg++,this.currentImg<e.length?this.loadImage(e,a):this.setState({columnData:this.data})}}},{key:"getImageHeight",value:function(e,a){return a/(e/50)}},{key:"getSmallestFromArray",value:function(e){var a=0,n=e[0];return e.forEach((function(t,l){t<n&&(n=e[l],a=l)})),a}},{key:"render",value:function(){var e=this,a=this.props,n=a.id,t=a.atts,l=a.editor,s=t.image,o=t.shape,r=t.customClass,c=t.metaCustomId,m=t.clickableOptions,p=t.showCaption,u=["vce-image-masonry-gallery"],g=["vce-image-masonry-gallery-wrapper vce"],d={},y="div",h=this.state&&this.state.columnData,v=[];if(h){var b=0;h.forEach((function(a,t){var l=[];a&&a.forEach((function(a,t){var o=e.getImageUrl(a),r={},c="vce-image-masonry-gallery-item",u={alt:a&&a.alt?a.alt:""};if("url"===m&&a.link&&a.link.url){y="a";var g=a.link;r={href:g.url,title:g.title,target:g.targetBlank?"_blank":void 0,rel:g.relNofollow?"nofollow":void 0}}else"imageNewTab"===m?(y="a",r={href:o,target:"_blank"}):"lightbox"===m?(y="a",r={href:o,"data-lightbox":"lightbox-".concat(n)}):"photoswipe"===m&&(y="a",r={href:o,"data-photoswipe-image":n,"data-photoswipe-index":b,"data-photoswipe-item":"photoswipe-".concat(n)},p&&a&&a.caption&&(r["data-photoswipe-caption"]=a.caption),d["data-photoswipe-gallery"]=n,b++);s[t]&&s[t].filter&&"normal"!==s[t].filter&&(c+=" vce-image-filter--".concat(s[t].filter)),l.push(k.a.createElement(y,i()({},r,{className:c,key:"vce-image-masonry-gallery-item-".concat(t,"-").concat(n)}),k.a.createElement("img",i()({className:"vce-image-masonry-gallery-img",src:e.getImageUrl(a)},u))))})),v.push(k.a.createElement("div",{className:"vce-image-masonry-gallery-column",key:"vce-image-masonry-gallery-col-".concat(t,"-").concat(n)},l))}))}"string"==typeof r&&r&&u.push(r);var f=this.getMixinData("imageGalleryGap");f&&g.push("vce-image-masonry-gallery--gap-".concat(f.selector)),(f=this.getMixinData("imageGalleryColumns"))&&g.push("vce-image-masonry-gallery--columns-".concat(f.selector)),"rounded"===o&&u.push("vce-image-masonry-gallery--border-rounded"),c&&(d.id=c);var x=this.applyDO("all");return k.a.createElement("div",i()({className:u.join(" ")},l,d),k.a.createElement("div",i()({className:g.join(" "),id:"el-"+n},x),k.a.createElement("div",{className:"vce-image-masonry-gallery-list"},v)))}}]),n}(l.a.getService("api").elementComponent);(0,l.a.getService("cook").add)(n("./imageMasonryGallery/settings.json"),(function(e){e.add(I)}),{css:n("./node_modules/raw-loader/index.js!./imageMasonryGallery/styles.css"),editorCss:n("./node_modules/raw-loader/index.js!./imageMasonryGallery/editor.css"),mixins:{imageGalleryColumns:{mixin:n("./node_modules/raw-loader/index.js!./imageMasonryGallery/cssMixins/imageGalleryColumns.pcss")},imageGalleryGap:{mixin:n("./node_modules/raw-loader/index.js!./imageMasonryGallery/cssMixins/imageGalleryGap.pcss")}}},"")},"./imageMasonryGallery/settings.json":function(e){e.exports=JSON.parse('{"image":{"type":"attachimage","access":"public","value":["https://cdn.hub.visualcomposer.com/plugin-assets/core-elements/imageMasonryGallery/image-1.jpg","https://cdn.hub.visualcomposer.com/plugin-assets/core-elements/imageMasonryGallery/image-2.jpg","https://cdn.hub.visualcomposer.com/plugin-assets/core-elements/imageMasonryGallery/image-3.jpg","https://cdn.hub.visualcomposer.com/plugin-assets/core-elements/imageMasonryGallery/image-4.jpg","https://cdn.hub.visualcomposer.com/plugin-assets/core-elements/imageMasonryGallery/image-5.jpg","https://cdn.hub.visualcomposer.com/plugin-assets/core-elements/imageMasonryGallery/image-6.jpg"],"options":{"multiple":true,"onChange":{"rules":{"clickableOptions":{"rule":"value","options":{"value":"url"}}},"actions":[{"action":"attachImageUrls"}]},"url":false,"imageFilter":true}},"shape":{"type":"buttonGroup","access":"public","value":"square","options":{"label":"Shape","values":[{"label":"Square","value":"square","icon":"vcv-ui-icon-attribute-shape-square"},{"label":"Rounded","value":"rounded","icon":"vcv-ui-icon-attribute-shape-rounded"}]}},"designOptions":{"type":"designOptions","access":"public","value":{},"options":{"label":"Design Options"}},"editFormTab1":{"type":"group","access":"protected","value":["clickableOptions","showCaption","image","columns","gap","shape","metaCustomId","customClass"],"options":{"label":"General"}},"metaEditFormTabs":{"type":"group","access":"protected","value":["editFormTab1","designOptions"]},"relatedTo":{"type":"group","access":"protected","value":["General"]},"customClass":{"type":"string","access":"public","value":"","options":{"label":"Extra class name","description":"Add an extra class name to the element and refer to it from the custom CSS option."}},"clickableOptions":{"type":"dropdown","access":"public","value":"lightbox","options":{"label":"OnClick action","description":"Choose an event performed when clicking on the image.","values":[{"label":"None","value":""},{"label":"Lightbox","value":"lightbox"},{"label":"PhotoSwipe","value":"photoswipe"},{"label":"Open the image in a new tab","value":"imageNewTab"},{"label":"Link selector","value":"url"}]}},"showCaption":{"type":"toggle","access":"public","value":false,"options":{"label":"Show the image caption in gallery view","onChange":{"rules":{"clickableOptions":{"rule":"value","options":{"value":"photoswipe"}}},"actions":[{"action":"toggleVisibility"}]}}},"gap":{"type":"number","access":"public","value":"10","options":{"label":"Gap","description":"Enter the gap in pixels (example: 5).","cssMixin":{"mixin":"imageGalleryGap","property":"gap","namePattern":"[\\\\da-f]+"}}},"columns":{"type":"number","access":"public","value":"3","options":{"label":"Number of columns","cssMixin":{"mixin":"imageGalleryColumns","property":"columns","namePattern":"[\\\\da-f]+"}}},"metaCustomId":{"type":"customId","access":"public","value":"","options":{"label":"Element ID","description":"Apply a unique ID to the element to link it directly by using #your_id (for element ID use lowercase input only)."}},"tag":{"access":"protected","type":"string","value":"imageMasonryGallery"},"sharedAssetsLibrary":{"access":"protected","type":"string","value":{"libraries":[{"rules":{"clickableOptions":{"rule":"value","options":{"value":"lightbox"}}},"libsNames":["lightbox"]},{"rules":{"clickableOptions":{"rule":"value","options":{"value":"photoswipe"}}},"libsNames":["photoswipe"]}]}}}')},"./node_modules/raw-loader/index.js!./imageMasonryGallery/cssMixins/imageGalleryColumns.pcss":function(e,a){e.exports="@media (min-width: 544px) {\n  .vce-image-masonry-gallery {\n    &--columns-$selector {\n      .vce-image-masonry-gallery-column {\n        @if $columns != false {\n          -webkit-flex: 0 0 calc(100% / $columns);\n              -ms-flex: 0 0 calc(100% / $columns);\n                  flex: 0 0 calc(100% / $columns);\n          max-width: calc(100% / $columns);\n        }\n      }\n    }\n  }\n}\n\n\n"},"./node_modules/raw-loader/index.js!./imageMasonryGallery/cssMixins/imageGalleryGap.pcss":function(e,a){e.exports=".vce-image-masonry-gallery {\n  &--gap-$selector {\n    @if $gap != false {\n      .vce-image-masonry-gallery-list {\n        margin-left: calc(-$(gap)px / 2);\n        margin-right: calc(-$(gap)px / 2);\n        margin-bottom: -$(gap)px;\n      }\n    }\n\n    @if $gap != false {\n      .vce-image-masonry-gallery-item {\n        padding-left: calc($(gap)px / 2);\n        padding-right: calc($(gap)px / 2);\n        margin-bottom: $(gap)px;\n      }\n    }\n  }\n}\n\n"},"./node_modules/raw-loader/index.js!./imageMasonryGallery/editor.css":function(e,a){e.exports=".vce-image-masonry-gallery {\n  min-height: 1em;\n}\n"},"./node_modules/raw-loader/index.js!./imageMasonryGallery/styles.css":function(e,a){e.exports=".vce-image-masonry-gallery-wrapper {\n  overflow: hidden;\n}\n\n.vce-image-masonry-gallery-list {\n  -webkit-flex: 1 1 auto;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-flex-direction: row;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-flex-wrap: wrap;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n  -webkit-justify-content: flex-start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  -webkit-align-content: flex-start;\n      -ms-flex-line-pack: start;\n          align-content: flex-start;\n}\n\n.vce-image-masonry-gallery-column {\n  -webkit-flex: 0 0 100%;\n      -ms-flex: 0 0 100%;\n          flex: 0 0 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n}\n\n.vce-image-masonry-gallery-item {\n  display: block;\n}\n\na.vce-image-masonry-gallery-item {\n  color: transparent;\n  border-bottom: 0;\n  text-decoration: none;\n  box-shadow: none;\n}\n\na.vce-image-masonry-gallery-item:hover,\na.vce-image-masonry-gallery-item:focus {\n  border-bottom: 0;\n  text-decoration: none;\n  box-shadow: none;\n}\n\n.vce-image-masonry-gallery-img {\n  width: 100%;\n  height: auto;\n}\n\n.vce-image-masonry-gallery--border-rounded .vce-image-masonry-gallery-img {\n  border-radius: 5px;\n}\n\n.vce-image-masonry-gallery .vce-image-masonry-gallery-item .vce-image-masonry-gallery-img {\n  box-shadow: none;\n}\n"}},[["./imageMasonryGallery/index.js"]]]);