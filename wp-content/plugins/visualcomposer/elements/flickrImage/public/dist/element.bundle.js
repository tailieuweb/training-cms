(window.vcvWebpackJsonp4x=window.vcvWebpackJsonp4x||[]).push([[0],{"./flickrImage/index.js":function(e,t,n){"use strict";n.r(t);var i=n("./node_modules/vc-cake/index.js"),a=n.n(i),l=n("./node_modules/@babel/runtime/helpers/extends/index.js"),r=n.n(l),s=n("./node_modules/@babel/runtime/helpers/classCallCheck/index.js"),c=n.n(s),o=n("./node_modules/@babel/runtime/helpers/createClass/index.js"),d=n.n(o),u=n("./node_modules/@babel/runtime/helpers/assertThisInitialized/index.js"),m=n.n(u),p=n("./node_modules/@babel/runtime/helpers/inherits/index.js"),v=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn/index.js"),h=n.n(f),g=n("./node_modules/@babel/runtime/helpers/getPrototypeOf/index.js"),k=n.n(g),b=n("./node_modules/@babel/runtime/helpers/defineProperty/index.js"),w=n.n(b),y=n("./node_modules/react/index.js"),x=n.n(y);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return h()(this,n)}}var j=function(e){v()(i,e);var t=I(i);function i(e){var a;c()(this,i),a=t.call(this,e),w()(m()(a),"imageSizes",{thumbnail:"150",medium:"300",large:"1024"});var l=n("./node_modules/lodash/lodash.js");return a.handleResize=l.debounce(a.handleResize.bind(m()(a)),200),a}return d()(i,[{key:"componentDidMount",value:function(){this.insertFlickr(this.props.atts.flickrUrl),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.atts.flickrUrl===e.atts.flickrUrl&&this.props.atts.width===e.atts.width||this.insertFlickr(e.atts.flickrUrl)}},{key:"handleResize",value:function(){this.insertFlickr(this.props.atts.flickrUrl)}},{key:"loadJSONP",value:function(e,t,n){var a="_jsonp_flickrImage_"+i.unique++;e.indexOf("?")>=0?e+="&jsoncallback="+a+"&format=json":e+="?jsoncallback="+a+"&format=json";var l=document.createElement("script");l.type="text/javascript",l.async=!0,l.src=e;var r=function(){document.head.removeChild(l),l=null,delete window[a]},s=window.setTimeout((function(){r()}),1e4);window[a]=function(e){window.clearTimeout(s),t.call(n||window,e),r()},document.getElementsByTagName("head")[0].appendChild(l)}},{key:"insertFlickr",value:function(e){var t=this;if(e.match("data-flickr-embed"))this.appendFlickr(e);else{var n="https://www.flickr.com/services/oembed/?url="+e;this.loadJSONP(n,(function(e){t.appendFlickr(e.html),t.props.api.request("layout:rendered",!0)}))}}},{key:"appendFlickr",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.refs.flickerInner.innerHTML="",window.setTimeout((function(){e.updateInlineHtml(e.refs.flickerInner,t)}),0)}},{key:"validateSize",value:function(e){var t=new RegExp("^-?\\d*(\\.\\d{0,9})?("+["px","em","rem","%","vw","vh"].join("|")+")?$");return""===e||e.match(t)?e:null}},{key:"checkImageSize",value:function(e){var t="";return window.vcvImageSizes&&window.vcvImageSizes[e]?t=window.vcvImageSizes[e].width:this.imageSizes[e]&&(t=this.imageSizes[e]),t?"".concat(t,"px"):""}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.atts,i=e.editor,a=n.customClass,l=n.alignment,s=n.width,c=n.metaCustomId,o="vce-flickr-image",d={},u={};"string"==typeof a&&a&&(o+=" "+a),l&&(o+=" vce-flickr-image--align-".concat(l)),(s=s.replace(/\s/g,"").toLowerCase())&&(s.match(/\d*/)[0]?(s=this.validateSize(s),s=/^\d+$/.test(s)?"".concat(s,"px"):s):s=this.checkImageSize(s),u.style={maxWidth:s}),d.key="customProps:".concat(t),c&&(d.id=c);var m=this.applyDO("all");return x.a.createElement("div",r()({},d,{className:o},i),x.a.createElement("div",r()({id:"el-"+t,className:"vce vce-flickr-image-wrapper"},m),x.a.createElement("div",r()({className:"vce-flickr-image-inner"},u,{ref:"flickerInner"})),null))}}]),i}(a.a.getService("api").elementComponent);w()(j,"unique",0),(0,a.a.getService("cook").add)(n("./flickrImage/settings.json"),(function(e){e.add(j)}),{css:n("./node_modules/raw-loader/index.js!./flickrImage/styles.css"),editorCss:n("./node_modules/raw-loader/index.js!./flickrImage/editor.css")},"")},"./flickrImage/settings.json":function(e){e.exports=JSON.parse('{"flickrUrl":{"type":"string","access":"public","value":"https://www.flickr.com/photos/thomasheaton/21171377373/","options":{"label":"Flickr URL (link) or embed code","link":true}},"designOptions":{"type":"designOptions","access":"public","value":{},"options":{"label":"Design Options"}},"editFormTab1":{"type":"group","access":"protected","value":["flickrUrl","width","alignment","metaCustomId","customClass"],"options":{"label":"General"}},"metaEditFormTabs":{"type":"group","access":"protected","value":["editFormTab1","designOptions"]},"relatedTo":{"type":"group","access":"protected","value":["General"]},"customClass":{"type":"string","access":"public","value":"","options":{"label":"Extra class name","description":"Add an extra class name to the element and refer to it from the custom CSS option."}},"assetsLibrary":{"access":"public","type":"string","value":["animate"]},"alignment":{"type":"buttonGroup","access":"public","value":"left","options":{"label":"Alignment","values":[{"label":"Left","value":"left","icon":"vcv-ui-icon-attribute-alignment-left"},{"label":"Center","value":"center","icon":"vcv-ui-icon-attribute-alignment-center"},{"label":"Right","value":"right","icon":"vcv-ui-icon-attribute-alignment-right"}]}},"metaDisableInteractionInEditor":{"type":"toggle","access":"protected","value":true},"width":{"type":"string","access":"public","value":"full","options":{"label":"Width","description":"Enter image width (example: \\"thumbnail\\", \\"medium\\", \\"large\\", \\"full\\" or other sizes defined by theme). Alternatively enter width in pixels (example: 200). Minimal width 151px."}},"metaBackendLabels":{"type":"group","access":"protected","value":[{"value":["flickrUrl"]}]},"metaCustomId":{"type":"customId","access":"public","value":"","options":{"label":"Element ID","description":"Apply a unique ID to the element to link it directly by using #your_id (for element ID use lowercase input only)."}},"tag":{"access":"protected","type":"string","value":"flickrImage"}}')},"./node_modules/raw-loader/index.js!./flickrImage/editor.css":function(e,t){e.exports='[data-vcv-element-disable-interaction="true"].vce-flickr-image {\n  position: relative;\n}\n\n[data-vcv-element-disable-interaction="true"].vce-flickr-image::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 999;\n}\n\n.vce-flickr-image {\n  min-height: 1em;\n}\n'},"./node_modules/raw-loader/index.js!./flickrImage/styles.css":function(e,t){e.exports='.vce-flickr-image iframe {\n  display: block;\n  vertical-align: top;\n}\n\n.vce-flickr-image-inner {\n  max-width: 100%;\n  min-width: 151px;\n  display: inline-block;\n  vertical-align: top;\n}\n\n.vce-flickr-image-wrapper {\n  display: inline-block;\n  max-width: 100%;\n}\n\n.vce-flickr-image--align-center {\n  text-align: center;\n}\n\n.vce-flickr-image--align-right {\n  text-align: right;\n}\n\n.vce-flickr-image--align-left {\n  text-align: left;\n}\n\n[data-vcv-element-disable-interaction="true"].vce-flickr-image {\n  position: relative;\n}\n\n[data-vcv-element-disable-interaction="true"].vce-flickr-image::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 999;\n}\n\n.vce.vce-flickr-image-wrapper::before {\n  content: \'\';\n  display:block;\n  min-width: 151px;\n}\n'}},[["./flickrImage/index.js"]]]);