!function(t){"use strict";let e=wpcWidgets.wpcItemNum;function i(){t(".wpc-sorting-list").sortable({items:"> div.wpc-sorting-item-wrapper",delay:75,placeholder:"wpc-filter-item-shadow",refreshPositions:!0,cursor:"move",handle:".wpc-sorting-item-handle",axis:"y",update:function(t,e){n(e.item.parent(".wpc-sorting-list"))},start:function(e,i){let n=i.item,o=i.item.children(".wpc-sorting-item-top"),r=o.height()+2;o.hasClass("wpc-opened")&&(o.removeClass("wpc-opened"),n.css("max-height",r+"px"),t(this).sortable("refreshPositions"))},stop:function(t,e){e.item.css("max-height","none")}})}function n(i){let n=i.find(".wpc-sorting-item-label"),o="",r="",s=new RegExp("^"+e+"[\\d]{1,100}$");n.length>0&&n.each(function(i,n){o=t(n).val(),r=o.replace(s,e+(i+1)),t(n).val(r).trigger("change")})}t(document).ready(function(){t(document).on("click",".wpc-sorting-item-title",function(){t(this).parent(".wpc-sorting-item-top").toggleClass("wpc-opened")}),t(document).on("click",".wpc-sorting-item-remove",function(){let e=t(this),i=e.parents("div.wpc-sorting-list");if(i.find(".wpc-sorting-item-wrapper").length<2)return;let o=e.parents("div.widget"),r=o.children(".widget-inside"),s=r.find(".widget-control-save"),c=r.find(".widget-id").val();e.parents(".wpc-sorting-item-wrapper").remove(),n(i),window.wpWidgets.dirtyWidgets[c]=!0,o.addClass("widget-dirty"),s.prop("disabled",!1).val(wp.i18n.__("Save"))}),t(document).on("change",".wpc-orderby-select",function(e){let i=t(this),n=i.parents(".wpc-sorting-item-inside").find(".wpc-sorting-item-meta-key-wrapper");return"m"===i.val()||"n"===i.val()?n.addClass("wpc-opened"):n.removeClass("wpc-opened"),!0}),t(document).on("input change",".wpc-sorting-item-label",function(){let e=t(this),i=e.parents(".wpc-sorting-item-wrapper"),n=(i.parents(".wpc-sorting-list"),i.find(".wpc-sorting-item-title"));if(""===e.val()){let t=i.index();n.text(n.data("title")+(t+1))}else o=e,n.text(o.val());var o}),t(document).on("widget-added widget-updated",function(){i()}),t(document).on("focus",".wpc-sorting-item-label",function(){let i=t(this).val(),n=new RegExp("^"+e+"[\\d]{1,100}$"),o=i.replace(n,"");t(this).val(o)}),t(document).on("click",".wpc-add-sorting-item",function(e){e.preventDefault();let i=t(this).parents(".widget-content"),n=i.find(".wpc-sorting-list"),o=i.find(".wpc-new-sorting-item").html(),r=t(o),s=r.find(".wpc-sorting-item-title"),c="wpc_new_id",d=n.find(".wpc-sorting-item-wrapper").length+1,p=function(t,e){return e.replace(c,d)};r.find('[id*="wpc_new_id"]').attr("id",p),r.find('[for*="wpc_new_id"]').attr("for",p),r.find('[name*="wpc_new_id"]').attr("name",p),r.find('[value*="wpc_new_id"]').attr("value",p),s.text(s.data("title")+d),r.attr("class",p),r.find(".wpc-sorting-item-top").addClass("wpc-opened"),t("input.wpc-ballast").trigger("change"),n.append(r)}),"undefined"!=typeof elementor&&elementor.hooks.addAction("panel/widgets/wp-widget-wpc_sorting_widget/controls/wp_widget/loaded",function(e){setTimeout(function(){i(),t("input.wpc-ballast").trigger("change")},500)}),i()})}(jQuery);